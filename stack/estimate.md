# Оценка сложности операций со стеком

Рассмотрим стек, содержащий $N$ элементов.
При оценке сложности мы будем использовать следующий вид потенциала:
$$ P(N) = N. $$

Для добавления элеметна используется
[метод `Stack.push`](https://github.com/MaksimZh/algo/blob/7450b9fbc14fbcdd78ca7584b2d9bd40fd431c58/stack/stack.py#L19-L22),
а для удаления -
[метод `Stack.pop`](https://github.com/MaksimZh/algo/blob/7450b9fbc14fbcdd78ca7584b2d9bd40fd431c58/stack/stack.py#L13-L17).

Для хранения содержимого стека используется связанный список, для которого сложность добавления и удаления элемента *в начало* списка имеет сложность $O(1)$.
Пусть истинная стоимость операции добавления равна $a$, а удаления $b$.
Тогда добавление элемента к стеку, содержащему $N$ элементов имеет сложность
$$ S_+ = a + P(N + 1) - P(N) = a + 1, $$
а удаление
$$ S_- = b + P(N - 1) - P(N) = b - 1. $$
Таким образом, сложность и добавления и удаления элемента для данной реализации стека не зависит от $N$, то есть равна $O(1)$.

### Примечание 1
Сложность определения размера стека в нынешней реализации метода
[`Stack.size`](https://github.com/MaksimZh/algo/blob/1caa2acf8de6e748102e308d53065b192b88b769/stack/stack.py#L5-L11)
равна $O(N)$.
Поэтому для определения не является ли стек пустым предпочтительно использовать метод
[`Stack.peek`](https://github.com/MaksimZh/algo/blob/1caa2acf8de6e748102e308d53065b192b88b769/stack/stack.py#L24-L25),
который имеет сложность $O(1)$ и возвращает `None` для пустого стека.

### Примечание 2
Текущаяя реализация метода
[`Stack.pop`](https://github.com/MaksimZh/algo/blob/7450b9fbc14fbcdd78ca7584b2d9bd40fd431c58/stack/stack.py#L13-L17)
включает
[проверку не является ли стек пустым](https://github.com/MaksimZh/algo/blob/1caa2acf8de6e748102e308d53065b192b88b769/stack/stack.py#L15).
От этой проверки можно избавиться, если
[замкнуть фиктивный узел на себя](https://github.com/MaksimZh/algo/blob/1caa2acf8de6e748102e308d53065b192b88b769/stack/stack_a.py#L4)
как в
[альтернативной реализации стека](https://github.com/MaksimZh/algo/blob/master/stack/stack_a.py).
