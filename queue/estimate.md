# Оценка сложности операций работы с очередью

## Очередь на основе связного списка
В [данной реализации](https://github.com/MaksimZh/algo/blob/master/queue/queue.py) очереди
добавление элемента происходит в конец списка, а удаление - с головы списка.
Поскольку ссылки как на голову, так и на хвост списка сохраняются, сложность обеих операций
не зависит от размера списка и составляет $O(1)$.

## Очередь на основе двух стеков
В [данной реализации](https://github.com/MaksimZh/algo/blob/master/queue/queue_stack.py) очереди
добавление элемента происходит во входной стек, а удаление из выходного стека.
Если выходной стек пуст, то перед удалением элемента в него перекладываются *все* элементы из входного стека.

Оценим методом группировки сложность добавления и последующего удаления $N$ элементов.
Пусть сложность добавления и удаления элемента для каждого из стеков равна $a$.
Тогда добавление $N$ элементов будет иметь сложность $aN$.
Перед удалением первого элемента произойдёт перенос всех элементов из первого стека во второй, который будет стоить $2aN$.
Затем удаление $N$ элементов будет стоить $aN$.
Итого, стоимость $2N$ операций составит:
$$ S = aN + 2aN + aN = 4aN. $$
Стоимость одной операции будет равна
$$ \frac{S}{2N} = 2a. $$

Таким образом, не смотря на дорогую операцию копирования всего стека перед первым удалением,
средняя сложность операций работы с такой очередью тоже будет $O(1)$.
Дело в том, что независимо от числа элементов очереди каждый элемент перед удалением копируется из одного стека в другой ровно один раз.
